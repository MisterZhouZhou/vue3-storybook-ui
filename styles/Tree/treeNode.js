"use strict";const t=require("vue"),v=require("classnames"),x=require("./types.js"),b=require("../Check/index.js"),V=require("./treeRender.js");function p(n){return typeof n=="function"||Object.prototype.toString.call(n)==="[object Object]"&&!t.isVNode(n)}const y=t.defineComponent({name:"MTreeNode",props:x.TreeNodeProps(),emits:["toggle-expand","select-change","check-change"],setup(n,{emit:l,expose:h}){const s=t.computed(()=>{var c;let e=!1;if(!n.checkStrictly&&((c=n.node)!=null&&c.hasChildren)){const{children:o}=n.node,d=o.filter(a=>a.checked);e=d.length>0&&d.length<o.length}return e});h({node:n.node,halfChecked:()=>s.value});const u=()=>{l("toggle-expand",n.node)},g=e=>{l("check-change",[e,n.node])},f=e=>{e.stopPropagation(),e.preventDefault(),n.node.disabled||l("select-change",n.node)};return()=>{const{node:e,render:c,iconSlot:o,showCheckbox:d}=n,a=()=>t.createVNode("div",{class:["node-arrow",e!=null&&e.expanded?"expanded":""]},[e.hasChildren&&(o?o(e==null?void 0:e.loading):e!=null&&e.loading?t.createVNode("i",{class:"iconfont iconloading ico-loading"},null):t.createVNode("i",{class:"iconfont iconExpand"},null))]),k=v("node-title",{disabled:e==null?void 0:e.disabled,selected:(e==null?void 0:e.selected)&&!d}),i=()=>c?t.createVNode(V,{render:c,node:e},null):t.createVNode("div",{class:k},[e.name]),C=()=>{if(d){let r;return t.createVNode(b,{class:"node-content node-checkbox",value:e.checked,"onUpdate:value":N=>e.checked=N,disabled:e==null?void 0:e.disabled,halfChecked:s.value,onChange:g},p(r=i())?r:{default:()=>[r]})}return t.createVNode("div",{onClick:f,class:"node-content node-title"},[i()])};return t.createVNode("div",{class:"m-tree-node",style:{paddingLeft:e.level*18+"px"},key:e.nodeKey,onClick:u},[a(),C()])}}});module.exports=y;
